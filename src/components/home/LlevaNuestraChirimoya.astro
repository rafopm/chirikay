---
import Button from '../shared/Button.astro';
import Container from '../shared/Container.astro';
import Icon from '../shared/Icon.astro';

import { CONTACT, SITE } from "../../consts";

// ChirimoyaLanding.astro
export interface Props {
  title?: string;
  subtitle?: string;
  seasonWarning?: string;
}

const { 
  title = "Lleva Nuestra Chirimoya A Tu Mesa",
  subtitle = "Frescura y calidad directamente del campo a tu hogar o negocio",
  seasonWarning = "Importante: Nuestros productos son cultivados naturalmente y sujetos a temporadas. La disponibilidad puede variar según la época del año y condiciones climáticas. Consultar stock antes de realizar pedidos. Muchas gracias."
} = Astro.props;

const services = [
  {
    id: 'familias',
    title: 'Para Familias',
    description: 'Disfruta en casa de la mejor chirimoya orgánica',
    icon: 'casa-flat',
    features: [
      'Cajas de 5kg y 10kg',
      'Entrega a domicilio',
      'Fruta seleccionada',
      'Disponibilidad estacional'
    ],
    buttonText: 'Comprar',
    buttonAction: '#comprar'
  },
  {
    id: 'mayoristas',
    title: 'Mayoristas',
    description: 'Volúmenes grandes para tu negocio',
    icon: 'mercado-flat',
    features: [
      'Pedidos desde 50kg',
      'Precios especiales',
      'Entrega programada',
      'Sujeto a disponibilidad'
    ],
    buttonText: 'Cotizar',
    buttonAction: '#cotizar'
  },
  {
    id: 'restaurantes',
    title: 'Restaurantes',
    description: 'Calidad premium para tu cocina',
    icon: 'restaurant-flat',
    features: [
      'Fruta de primera calidad',
      'Entrega previa coordinación',
      'Asesoría especializada',
      'Producto de temporada'
    ],
    buttonText: 'Contactar',
    buttonAction: '#contactar'
  }
];
---

<section class="bg-rv-very-light overflow-hidden relative">

  <div class="absolute inset-0 z-0 opacity-30">
    <img 
        src="/images/chirimoya-chirikay.webp" 
        alt="Fondo tenue" 
        class="w-full h-full object-cover"
    />
</div>
    <Container className="py-20">
    <!-- Header -->
    <div class="text-center mb-16">
      <h2 class="title">
        {title}
      </h2>
      <p class="text-lg md:text-xl font-secondary">
        {subtitle}
      </p>
      
      <!-- Seasonal Warning Banner -->
      <div class="mt-8 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg mx-auto">
        <div class="flex">
          <div class="flex-shrink-0">
            <svg class="h-8 w-8 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
          </div>
          <div class=" ">
            <p class="text-lg text-yellow-700 font-medium">
              {seasonWarning}
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Services Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-12">
      {services.map((service) => (
        <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 border border-green-100">
          <!-- Icon -->
          <div class="w-16 h-16 bg-rv-dark rounded-full flex items-center justify-center mb-6 mx-auto">
            <Icon
                            name={service.icon}
                            size={24}
                            inheritColor={false}
                            class=""
                        />
          </div>

          <!-- Content -->
          <div class="text-center mb-2">
            <h3 class="card-title">
              {service.title}
            </h3>
            <p class="card-paragraph p-4 text-lg">
              {service.description}
            </p>
          </div>

          <!-- Features -->
          <div class="space-y-3 mb-8">
            {service.features.map((feature) => (
              <div class="flex items-center">
                <Icon
                            name="checkbox-flat"
                            size={24}
                            inheritColor={false}
                            class="mr-2"
                        />
                <span class="text-sm font-medium font-secondary">{feature}</span>
              </div>
            ))}
          </div>

          <!-- CTA Button -->
          <div class="text-center">
            <Button
                    ariaLabel={service.buttonText}
                    text={service.buttonText}
                    href={`https://wa.me/${CONTACT.WHATSAPP}?text=Me%20interesa%20su%20producto%20${SITE.URL}`}
                    icon="whatsapp"
                    iconPosition="left"
                    style="rounded"
                    color="var(--rv-cta)"
                    textColor="var(--rv-very-dark)"
                    hoverColor="var(--rv-dark)"
                    hoverTextColor="var(--rv-light)"
                    shadowColor="var(--rv-dark)"
                    size="xl"
                    class="px-[60px] font-secondary font-semibold"
                />
          </div>
        </div>
      ))}
    </div>
  </Container>
</section>